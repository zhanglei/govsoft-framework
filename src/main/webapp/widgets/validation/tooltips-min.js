if(typeof Prototype!="undefined"&&(typeof $!="undefined")){$prototype=$}var Tooltip=Class.create();Tooltip.prototype={initialize:function(b,a){this.el=$prototype(b);this.initialized=false;this.setOptions(a);this.showEvent=this.show.bindAsEventListener(this);this.hideEvent=this.hide.bindAsEventListener(this);this.updateEvent=this.update.bindAsEventListener(this);Event.observe(this.el,"mouseover",this.showEvent);Event.observe(this.el,"mouseout",this.hideEvent);this.content=this.el.title;this.el.title="";this.el.descendants().each(function(c){if(Element.readAttribute(c,"alt")){c.alt=""}})},setOptions:function(a){this.options={backgroundColor:"#999",borderColor:"#666",textColor:"",textShadowColor:"",maxWidth:100,align:"left",delay:250,mouseFollow:true,opacity:0.75,appearDuration:0.25,hideDuration:0.25};Object.extend(this.options,a||{})},show:function(a){this.xCord=Event.pointerX(a);this.yCord=Event.pointerY(a);if(!this.initialized){this.timeout=window.setTimeout(this.appear.bind(this),this.options.delay)}},hide:function(a){if(this.initialized){if(this.options.mouseFollow){Event.stopObserving(this.el,"mousemove",this.updateEvent)}this.tooltip.hide()}this._clearTimeout(this.timeout);this.initialized=false},update:function(a){this.xCord=Event.pointerX(a);this.yCord=Event.pointerY(a);this.setup()},appear:function(){var a='<div class="tooltip" style="display: none;"><div class="xtop"><div class="xb1" style="background-color: rgb(204, 153, 102);"></div><div class="xb2" style="border-color: rgb(204, 153, 102); background-color: rgb(255, 204, 153);"></div><div class="xb3" style="border-color: rgb(204, 153, 102); background-color: rgb(255, 204, 153);"></div><div class="xb4" style="border-color: rgb(204, 153, 102); background-color: rgb(255, 204, 153);"></div></div><div class="xboxcontent" style="border-color: rgb(204, 153, 102); background-color: rgb(255, 204, 153); color: rgb(0, 0, 0); text-shadow: 2px 2px 0pt rgb(255, 255, 255);">'+this.content+'</div><div class="xbottom"><div class="xb4" style="border-color: rgb(204, 153, 102); background-color: rgb(255, 204, 153);"></div><div class="xb3" style="border-color: rgb(204, 153, 102); background-color: rgb(255, 204, 153);"></div><div class="xb2" style="border-color: rgb(204, 153, 102); background-color: rgb(255, 204, 153);"></div><div class="xb1" style="background-color: rgb(204, 153, 102);"></div></div></div>';new Insertion.Before(document.body.childNodes[0],a);this.tooltip=document.body.childNodes[0];Element.extend(this.tooltip);this.options.width=this.tooltip.getWidth();this.tooltip.style.width=this.options.width+"px";this.setup();if(this.options.mouseFollow){Event.observe(this.el,"mousemove",this.updateEvent)}this.initialized=true;this.tooltip.show()},setup:function(){if(this.options.width>this.options.maxWidth){this.options.width=this.options.maxWidth;this.tooltip.style.width=this.options.width+"px"}if(this.xCord+this.options.width>=Element.getWidth(document.body)){this.options.align="right";this.xCord=this.xCord-this.options.width+20}this.tooltip.style.left=this.xCord-7+"px";this.tooltip.style.top=this.yCord+12+"px"},stop:function(){this.hide();Event.stopObserving(this.el,"mouseover",this.showEvent);Event.stopObserving(this.el,"mouseout",this.hideEvent);Event.stopObserving(this.el,"mousemove",this.updateEvent)},_clearTimeout:function(a){clearTimeout(a);clearInterval(a);return null}};